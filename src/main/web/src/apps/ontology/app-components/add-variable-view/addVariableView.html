<div class="om-av-view">

	<button ng-click="goBack()">Back</button>

	<h2>Add New Variable</h2>
	<form novalidate>
		<button ng-click="saveVariable($event, variable)" type="submit">Save</button>
		<div>
			<label for="om-av-name">Name</label>
			<input type="text" name="om-av-name" id="om-av-name" ng-model="variable.name"></input>
		</div>

		<div>
			<label for="om-av-description">Description</label>
			<textarea type="text" name="om-av-description" id="om-av-description" ng-model="variable.description"></textarea>
		</div>

		<div>
			<label for="om-av-property">Property</label>

			<ui-select name="om-av-property" id="om-av-property" ng-model="variable.propertyId" theme="select2">
				<ui-select-match>{{$select.selected.name}}</ui-select-match>
				<ui-select-choices repeat="property.id as property in data.properties | filter: $select.search">
					{{property.name}}
				</ui-select-choices>
			</ui-select>

			<a href="#" ng-click="addNew($event, 'property')">Add a new property</a>
		</div>

		<div>
			<label for="om-av-method">Method</label>

			<ui-select name="om-av-method" id="om-av-method" ng-model="variable.methodId" theme="select2">
				<ui-select-match>{{$select.selected.name}}</ui-select-match>
				<ui-select-choices repeat="method.id as method in data.methods | filter: $select.search">
					{{method.name}}
				</ui-select-choices>
			</ui-select>

			<a href="#" ng-click="addNew($event, 'method')">Add a new method</a>
		</div>

		<div>
			<label for="om-av-scale">Scale</label>

			<ui-select name="om-av-scale" id="om-av-scale" ng-model="variable.scaleId" theme="select2">
				<ui-select-match>{{$select.selected.name}}</ui-select-match>
				<ui-select-choices repeat="scale.id as scale in data.scales | filter: $select.search">
					{{scale.name}}
				</ui-select-choices>
			</ui-select>

			<a href="#" ng-click="addNew($event, 'scale')">Add a new scale</a>
		</div>

		<div>
			<label for="om-av-type">Variable Type</label>

			<!-- TODO: Get variable type to just return array of IDs -->
			<ui-select name="om-av-type" id="om-av-type" multiple ng-model="variable.variableTypeIds" theme="select2">
				<ui-select-match>{{$item.name}}</ui-select-match>
				<ui-select-choices repeat="type in data.types">
					{{type.name}}
				</ui-select-choices>
			</ui-select>
		</div>

		<div>
			<label for="om-av-ontology-id">Crop Ontology Id</label>
			<input type="text" name="om-av-ontology-id" id="om-av-ontology-id" ng-model="variable.cropOntologyId"></input>
		</div>

		<div ng-show="showRangeWidget">
			<label for="om-av-min">Minimum Expected Value</label>
			<input type="text" name="om-av-min" id="om-av-min" ng-model="variable.expectedRange.min"></input>

			<label for="om-av-max">Maximum Expected Value</label>
			<input type="text" name="om-av-max" id="om-av-max" ng-model="variable.expectedRange.max"></input>
		</div>
	</form>
</div>
